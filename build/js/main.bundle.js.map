{"version":3,"sources":["webpack://keksobooking/./source/js/data.js","webpack://keksobooking/./source/js/card.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/message.js","webpack://keksobooking/./source/js/filtr.js","webpack://keksobooking/./source/js/photo.js","webpack://keksobooking/./source/js/public-reset.js","webpack://keksobooking/./source/js/api.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/main.js"],"names":["offerTypesMap","cardElement","document","querySelector","content","hideElement","className","classList","add","formPrice","formTypeSelect","formTimeIn","formTimeOut","formTitle","formGuestSelect","formRoomSelect","formAdForm","formAdFormElements","querySelectorAll","formButtonReset","placeTypePrice","PLACEHOLDER","PRICE_MIN","addEventListener","placeholder","value","min","evt","valueLength","currentTarget","length","setCustomValidity","reportValidity","valuePrice","onGuestsRooms","valueRooms","Number","valueGuests","isEscEvent","key","debounce","fn","wait","t","clearTimeout","setTimeout","apply","this","arguments","mainElement","successMessageElement","errorMessageElement","onSuccessMessageClick","remove","removeEventListener","onSuccessMessageKeydown","preventDefault","onErrorMessageClick","onErrorMessageKeydown","formMapFilters","formMapFiltersElements","housingTypeSelect","housingPriceSelect","housingRoomsSelect","housingGuestsSelect","wifiFilter","dishwasherFilter","parkingFilter","washerFilter","elevatorFilter","conditionerFilter","ANY_VALUE","FILTER_VALUE","isCheckPrice","advertisement","element","offer","price","isCheckRooms","rooms","isCheckGuests","parseInt","guests","isCheckFeatures","feature","featureName","getAttribute","replace","checked","features","includes","avatarChooser","avatarContainer","avatarPreview","photoChooser","photosContainer","photoPreview","IMAGE_TYPES","IMAGE_DEFAULT_SOURCE","deleteChildren","parent","firstChild","removeChild","pasteImage","imageElement","container","src","image","cloneNode","appendChild","readImage","file","fileName","preview","some","item","endsWith","reader","FileReader","result","readAsDataURL","chooser","avatarFile","files","avatarFileName","name","toLowerCase","onAvatarChooserChange","i","onImageChooserChange","clearPage","reset","setDefaultMainMarker","setFormAddressFieldDefault","deleteMarkers","markers","sendSuccessForm","getDataMap","body","onSuccess","FormData","target","fetch","method","then","response","ok","Error","status","statusText","catch","formAddressField","advertisementsToRender","map","L","DefaultCoordinates","setFormAddressField","lat","lng","MAIN_PIN_ICON","icon","iconUrl","iconSize","iconAnchor","PIN_ICON","initMap","on","forEach","elem","removeAttribute","setView","tileLayer","attribution","addTo","mainPinMarker","marker","draggable","getLatLng","toFixed","createMarkers","data","object","location","bindPopup","newCardElement","title","textContent","address","type","time","checkin","checkout","featureListElement","innerHTML","fragmentElement","createDocumentFragment","listItem","createElement","createFeatureList","photoListElement","photos","j","imageItem","setAttribute","createPhotosList","description","avatar","author","createCard","keepInView","push","setLatLng","onSuccsess","advertisements","slice","filteredAdds","resultAdvertisements","getFilteredAds","onFilterChange","setFilterChange","json","objects","error","message","errorReasonElement","createErrorMessage"],"mappings":"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","file":"main.bundle.js","sourcesContent":["import { getRandomNumber, getRandomInteger, getRandomLocation, getRandomArrayElement, getArrayRandomLength } from './util.js';\n\n\n// Тестовые данные\nconst TITLE = [\n  'Дворец 1',\n  'Дворец 2',\n  'Квартира 1',\n  'Квартира 2',\n  'Дом 1',\n  'Дом 2',\n  'Дом 3',\n  'Бунгало 1',\n];\n\nconst TYPE = [\n  'palace',\n  'flat',\n  'house',\n  'bungalow',\n];\n\nconst TIMES = [\n  '12:00',\n  '13:00',\n  '14:00',\n];\n\nconst FEATURES = [\n  'wifi',\n  'dishwasher',\n  'parking',\n  'washer',\n  'elevator',\n  'conditioner',\n];\n\nconst PHOTOS = [\n  'http://o0.github.io/assets/images/tokyo/hotel1.jpg',\n  'http://o0.github.io/assets/images/tokyo/hotel2.jpg',\n  'http://o0.github.io/assets/images/tokyo/hotel3.jpg',\n];\n\n\nconst Guests = {\n  MIN: 1,\n  MAX: 15,\n};\n\nconst Rooms = {\n  MIN: 1,\n  MAX: 5,\n};\n\nconst Price = {\n  MIN: 1000,\n  MAX: 1000000,\n};\n\nconst Location = {\n  X: {\n    MIN: 35.65000,\n    MAX: 35.70000,\n  },\n\n  Y: {\n    MIN: 139.70000,\n    MAX: 139.80000,\n  },\n}\n\nconst NUMBER_AFTER_COMMA = 5;\n\n\n//   Генерация координат объекта (функция)\nconst getRandomСoordinates = function (x, y) {\n  x = Number(getRandomLocation(Location.X.MIN, Location.X.MAX, NUMBER_AFTER_COMMA));\n  y = Number(getRandomLocation(Location.Y.MIN, Location.Y.MAX, NUMBER_AFTER_COMMA));\n\n  const locations = {\n    X: x,\n    Y: y,\n  };\n\n  return (locations);\n}\n\n\n//   Генерация объекта с объявлением\nconst getАdvertising = () => {\n  const location = getRandomСoordinates();\n\n  return {\n    author: {\n      avatar: 'img/avatars/user0' + getRandomInteger(1, 8) + '.png',\n    },\n    offer: {\n      title: getRandomArrayElement(TITLE),\n      address: location.X + ', ' + location.Y,\n      price: getRandomNumber(Price.MIN, Price.MAX),\n      type: getRandomArrayElement(TYPE),\n      rooms: getRandomInteger(Rooms.MIN, Rooms.MAX),\n      guests: getRandomInteger(Guests.MIN, Guests.MAX),\n      checkin: getRandomArrayElement(TIMES),\n      checkout: getRandomArrayElement(TIMES),\n      features: getArrayRandomLength(FEATURES),\n      description: 'Описание',\n      photos: getArrayRandomLength(PHOTOS),\n    },\n    location: location,\n  };\n};\n\n\n// Массив сгенерированных объектов объявлений\nconst createArrayАdvertising = function (numberАdvertising) {\n  const array = [];\n  for (let i = 0; i < numberАdvertising; i++) {\n    array.push(getАdvertising());\n  }\n  return (array);\n}\n\n\nexport { createArrayАdvertising, TYPE };\n","//   Сопоставление типов жилья с подписями\nconst offerTypesMap = {\n  'palace': 'Дворец',\n  'flat': 'Квартира',\n  'house': 'Дом',\n  'bungalow': 'Бунгало',\n}\n\nconst PHOTO_WIDTH = 45;\nconst PHOTO_HEIGHT = 40;\n\n\n// Получение шаблона объявления\nconst cardTemplate = document.querySelector('#card').content;\nconst cardElement = cardTemplate.querySelector('article');\n\n\n// Скрытие элемента по классу\nconst hideElement = function (className) {\n  cardElement.querySelector(className).classList.add('hidden');\n}\n\n\n// Формирование перечня features\nconst createFeatureList = function (features) {\n  const fragmentElement = document.createDocumentFragment();\n\n  for (let i = 0; i < features.length; i++) {\n    const listItem = document.createElement('li');\n    listItem.classList.add('popup__feature--' + features[i], 'popup__feature');\n    fragmentElement.appendChild(listItem);\n  }\n  return fragmentElement;\n}\n\n\n// Формирование перечня photos\nconst createPhotosList = function (photos) {\n  const fragmentElement = document.createDocumentFragment();\n\n  for (let j = 0; j < photos.length; j++) {\n    const imageItem = document.createElement('img');\n    imageItem.classList.add('popup__photo');\n    imageItem.setAttribute('src', photos[j]);\n    imageItem.setAttribute('width', PHOTO_WIDTH);\n    imageItem.setAttribute('height', PHOTO_HEIGHT);\n    imageItem.setAttribute('alt', 'Фотография жилья');\n    fragmentElement.appendChild(imageItem);\n  }\n  return fragmentElement;\n}\n\n\n\n//   Функция, которая принимает в себя одно объявление и заполняет одну карточку\nconst createCard = function (item) {\n  const newCardElement = cardElement.cloneNode(true);\n\n  // title\n  if (item.offer.title) {\n    newCardElement.querySelector('.popup__title').textContent = item.offer.title;\n  } else {\n    hideElement('.popup__title');\n  }\n\n\n  // address\n  if (item.offer.address) {\n    newCardElement.querySelector('.popup__text--address').textContent = item.offer.address;\n  } else {\n    hideElement('.popup__text--address');\n  }\n\n\n  // price\n  if (item.offer.price) {\n    newCardElement.querySelector('.popup__text--price').textContent = item.offer.price + ' ₽/ночь';\n  } else {\n    hideElement('.popup__text--price');\n  }\n\n\n  // type\n  if (item.offer.type) {\n    newCardElement.querySelector('.popup__type').textContent = offerTypesMap[item.offer.type];\n  } else {\n    hideElement('.popup__type');\n  }\n\n\n  // rooms, guests\n  const rooms = item.offer.rooms;\n  const guests = item.offer.guests;\n  if (item.offer.rooms && item.offer.guests) {\n    newCardElement.querySelector('.popup__text--capacity').textContent = rooms + (rooms === 1 ? ' комнатa для ' : ((rooms === 2 || rooms === 3 || rooms === 4) ? ' комнаты для ' : ' комнат для ')) + guests + (guests === 1 ? ' гостя' : ' гостей');\n  } else {\n    hideElement('.popup__text--capacity');\n  }\n\n\n  // checkin, checkout\n  if (item.offer.time) {\n    newCardElement.querySelector('.popup__text--time').textContent = 'Заезд после ' + item.offer.checkin + ' выезд до ' + item.offer.checkout;\n  } else {\n    hideElement('.popup__text--time');\n  }\n\n\n  //  features\n  const featureListElement = newCardElement.querySelector('.popup__features');\n  featureListElement.innerHTML = '';\n  if (item.offer.features && item.offer.features.length) {\n    featureListElement.appendChild(createFeatureList(item.offer.features));\n  } else {\n    hideElement('.popup__features');\n  }\n\n\n  //  photos\n  const photoListElement = newCardElement.querySelector('.popup__photos');\n  photoListElement.innerHTML = '';   // Очищение элемента\n  if (item.offer.photos && item.offer.photos.length) {\n    photoListElement.appendChild(createPhotosList(item.offer.photos));\n  } else {\n    hideElement('.popup__photos');\n  }\n\n\n  //  description\n  if (item.offer.description) {\n    newCardElement.querySelector('.popup__description').textContent = item.offer.description;\n  } else {\n    hideElement('.popup__description');\n  }\n\n\n  //  avatar\n  if (item.offer.avatar) {\n    newCardElement.querySelector('.popup__avatar').src = item.author.avatar;\n  } else {\n    hideElement('.popup__avatar');\n  }\n\n\n\n  //  Возврат карточки\n  return (newCardElement);\n}\n\n\nexport { createCard };\n","// Форма объявления\n\nconst formPrice = document.querySelector('#price');\nconst formTypeSelect = document.querySelector('#type');\nconst formTimeIn = document.querySelector('#timein');\nconst formTimeOut = document.querySelector('#timeout');\n\nconst formTitle = document.querySelector('#title');\nconst formGuestSelect = document.querySelector('#capacity');\nconst formRoomSelect = document.querySelector('#room_number');\n\nconst formAdForm = document.querySelector('.ad-form');\nconst formAdFormElements = formAdForm.querySelectorAll('fieldset');\n\nconst formButtonReset = document.querySelector('.ad-form__reset');\n\n\nconst MIN_TITLE_LENGTH = 30;\nconst MAX_TITLE_LENGTH = 100;\n\nconst MAX_PRICE = 1000000;\n\n\n\n\n//   Перечисление типов жилья\nconst placeTypes = {\n  BUNGALOW: 'bungalow',\n  FLAT: 'flat',\n  HOUSE: 'house',\n  PALACE: 'palace',\n}\n\n\n//   Типы жилья с placeholer и min значением\nconst placeTypePrice = {\n  [placeTypes.BUNGALOW]: {\n    PLACEHOLDER: '0',\n    PRICE_MIN: 0,\n  },\n  [placeTypes.FLAT]: {\n    PLACEHOLDER: '1000',\n    PRICE_MIN: 1000,\n  },\n  [placeTypes.HOUSE]: {\n    PLACEHOLDER: '5000',\n    PRICE_MIN: 5000,\n  },\n  [placeTypes.PALACE]: {\n    PLACEHOLDER: '10000',\n    PRICE_MIN: 10000,\n  },\n}\n\n\n//   Изменение значения placeholder поля \"Цена за ночь, руб.\" при изменении поля \"Тип жилья\"\nformTypeSelect.addEventListener('change', () => {\n  formPrice.placeholder = placeTypePrice[formTypeSelect.value].PLACEHOLDER;\n  formPrice.min = placeTypePrice[formTypeSelect.value].PRICE_MIN;\n})\n\n//   Изменение взаимозависимых полей \"Время заезда и выезда\"\nformTimeIn.addEventListener('change', function () {\n  formTimeOut.value = formTimeIn.value;\n});\nformTimeOut.addEventListener('change', function () {\n  formTimeIn.value = formTimeOut.value;\n});\n\n\n// // Поле \"Заголовок объявления\"\n//   обработчик\nconst onFormTitle = (evt) => {\n  const valueLength = evt.currentTarget.value.length;\n\n  if (valueLength < MIN_TITLE_LENGTH) {\n    formTitle.setCustomValidity('Минимальная длина - ' + MIN_TITLE_LENGTH + ' симв.: осталось ещё ' + (MIN_TITLE_LENGTH - valueLength));\n  } else if (valueLength > MAX_TITLE_LENGTH) {\n    formTitle.setCustomValidity('Удалите лишние ' + (valueLength - MAX_TITLE_LENGTH) + ' симв.');\n  } else {\n    formTitle.setCustomValidity('');\n  }\n\n  formTitle.reportValidity();\n};\n\n//   слушатель\nformTitle.addEventListener('input', onFormTitle);\n\n\n\n// // Поле \"Цена за ночь, руб.\"\n//   обработчик\nconst onFormPrice = (evt) => {\n  const valuePrice = evt.currentTarget.value;\n\n  if (valuePrice < (placeTypePrice[formTypeSelect.value].PRICE_MIN)) {\n    formPrice.setCustomValidity('Минимальная цена ночь - ' + placeTypePrice[formTypeSelect.value].PRICE_MIN + ': увеличьте вводимую цену');\n  } else if (valuePrice > MAX_PRICE) {\n    formPrice.setCustomValidity('Максимальная цена ночь - ' + MAX_PRICE + ': уменьшите вводимую цену');\n  } else {\n    formPrice.setCustomValidity('');\n  }\n\n  formPrice.reportValidity();\n}\n\n//   слушатель\nformPrice.addEventListener('change', onFormPrice);\n\n\n\n// // Поле \"Количество комнат\", Поле \"Количество мест\"\nconst onGuestsRooms = () => {\n  const valueRooms = Number(formRoomSelect.value);\n  const valueGuests = Number(formGuestSelect.value);\n\n  if (valueRooms === 1 && valueGuests !== 1) {\n    formGuestSelect.setCustomValidity('1 комната - для 1 гостя');\n  } else if (valueRooms === 2 && (valueGuests === 3 || valueGuests === 0)) {\n    formGuestSelect.setCustomValidity('2 комнаты - для 1-2 гостей');\n  } else if (valueRooms === 3 && valueGuests === 0) {\n    formGuestSelect.setCustomValidity('3 комнаты - для 1-3 гостей');\n  } else if (valueRooms === 100 && valueGuests !== 0) {\n    formGuestSelect.setCustomValidity('100 комнат - не для гостей');\n  } else {\n    formGuestSelect.setCustomValidity('');\n  }\n\n  formGuestSelect.reportValidity();\n};\n\nconst changeRoomsSelect = () => onGuestsRooms();\nconst changeGuestsSelect = () => onGuestsRooms();\nformRoomSelect.addEventListener('change', changeRoomsSelect);\nformGuestSelect.addEventListener('change', changeGuestsSelect);\n\n\n\n//   Активное состояние Формы\nconst setFormActive = () => {\n  formAdForm.classList.remove('ad-form--disabled');\n  formAdFormElements.forEach((elem) => {\n    elem.removeAttribute('disabled');\n  });\n}\n\n\n//   Неактивное состояние Формы\nconst setFormDeactive = () => {\n  formAdForm.classList.add('ad-form--disabled');\n  formAdFormElements.forEach((elem) => {\n    elem.setAttribute('disabled', true);\n  });\n}\n\n\n\nexport { setFormActive, setFormDeactive, formButtonReset, formAdForm };\n","//  Генерация случайного числа\nconst getRandomNumber = function (min = 0, max = 0) {\n  if (max <= min) {\n    throw new Error('Ошибка ввода: ' + 'min=' + min + ', max=' + max + '.');\n  }\n  return min + Math.random() * (max + 1 - min);\n}\n\nconst getRandomInteger = function (min = 0, max = 0) {\n  return Math.floor(getRandomNumber(min, max));\n}\n\n\n//   Генерация числа с плавающей точкой\nconst getRandomLocation = function (min = 0, max = 0, NUMBER_AFTER_COMMA) {\n  let resultRandom = Math.random() * (max - min) + min;\n  return resultRandom ? resultRandom.toFixed(NUMBER_AFTER_COMMA) : '0';\n}\n\n\n\n//  Генерация случайного элемента массива\nconst getRandomArrayElement = (elements) => {\n  return elements[getRandomInteger(0, elements.length - 1)];\n}\n\n\n\n\n//  Массив случайной длины\nconst getArrayRandomLength = function (elements) {\n  const data = [];\n  for (let i = 0; i <= getRandomInteger(0, elements.length - 1); i++) {\n    let value = getRandomArrayElement(elements);\n    data.push(value);\n  }\n  return [...new Set(data)];\n}\n\n\n\nconst isEscEvent = (evt) => {\n  return evt.key === ('Escape' || 'Esc');\n};\n\n\nconst debounce = (fn, wait) => {\n  let t;\n  return function () {\n    clearTimeout(t);\n    t = setTimeout(() => fn.apply(this, arguments), wait);\n  }\n}\n\n\nexport {\n  getRandomNumber,\n  getRandomInteger,\n  getRandomLocation,\n  getRandomArrayElement,\n  getArrayRandomLength,\n  isEscEvent,\n  debounce\n};\n","import { isEscEvent } from  './util.js';\n\nconst mainElement = document.querySelector('main')\nconst successMessageTemplate = document.querySelector('#success').content;\nconst successMessageElement = successMessageTemplate.querySelector('.success');\nconst errorMessageTemplate = document.querySelector('#error').content;\nconst errorMessageElement = errorMessageTemplate.querySelector('.error');\n\n\nconst SHOW_TIME = 10000;\n\n\n//   Показ ошибки, если не удалось получить данные с сервера:\nconst createErrorMessage = (message) => {\n  const errorMessageElement = document.querySelector('#server-error').content.querySelector('.server-error').cloneNode(true);\n  const errorReasonElement = document.createElement('p');\n  errorReasonElement.classList.add('server-error__message')\n  errorReasonElement.textContent = message;\n  errorMessageElement.appendChild(errorReasonElement);\n  document.body.appendChild(errorMessageElement);\n\n  setTimeout(() => {\n    errorMessageElement.remove();\n  }, SHOW_TIME);\n}\n\n\n\n/************ отправка формы ***********/\n\n// Закрытие сообщения об успешной отправке\nconst onSuccessMessageClick = () => {\n  successMessageElement.remove();\n  document.removeEventListener('keydown', onSuccessMessageKeydown);\n  document.removeEventListener('click', onSuccessMessageClick);\n}\n\n// Закрытие сообщения об успешной отправке при нажатии Esc\nconst onSuccessMessageKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    onSuccessMessageClick();\n  }\n}\n\n// Закрытие сообщения об ошибке отправки формы\nconst onErrorMessageClick = () => {\n  errorMessageElement.remove();\n  document.removeEventListener('keydown', onErrorMessageKeydown);\n  document.removeEventListener('click', onErrorMessageClick);\n}\n\n// Закрытие сообщения об ошибке отправки при нажатии Esc\nconst onErrorMessageKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    onErrorMessageClick();\n  }\n}\n\n// Показ сообщения после успешной отправки\nconst showSuccessMessage = () => {\n  mainElement.appendChild(successMessageElement);\n  document.addEventListener('keydown', onSuccessMessageKeydown);\n  document.addEventListener('click', onSuccessMessageClick);\n}\n\n// Показ сообщения об ошибке отправки\nconst showErrorMessage = () => {\n  mainElement.appendChild(errorMessageElement);\n  document.addEventListener('keydown', onErrorMessageKeydown);\n  document.addEventListener('click', onErrorMessageClick);\n}\n\n\n\n\nexport { createErrorMessage, showSuccessMessage, showErrorMessage };\n","import { deleteMarkers, createMarkers } from './map.js';\nimport { debounce } from './util.js';\n\n\n\nconst formMapFilters = document.querySelector('.map__filters');\nconst formMapFiltersElements = formMapFilters.querySelectorAll('.map__filter');\n\nconst housingTypeSelect = formMapFilters.querySelector('#housing-type');\nconst housingPriceSelect = formMapFilters.querySelector('#housing-price');\nconst housingRoomsSelect = formMapFilters.querySelector('#housing-rooms');\nconst housingGuestsSelect = formMapFilters.querySelector('#housing-guests');\n\nconst wifiFilter = document.querySelector('#filter-wifi');\nconst dishwasherFilter = document.querySelector('#filter-dishwasher');\nconst parkingFilter = document.querySelector('#filter-parking');\nconst washerFilter = document.querySelector('#filter-washer');\nconst elevatorFilter = document.querySelector('#filter-elevator');\nconst conditionerFilter = document.querySelector('#filter-conditioner');\n\nconst RERENDER_DELAY = 500;\n\nconst SIMILAR_STAYS_COUNT = 10;\n\nconst PriceMap = {\n  LOW_PRICE: 10000,\n  HIGH_PRICE: 50000,\n}\n\nconst ANY_VALUE = 'any';\nconst LOW_VALUE = 'low';\nconst MIDDLE_VALUE = 'middle';\nconst HIGH_VALUE = 'high';\n\nconst FILTER_VALUE = /filter-/;\n\n\n//   Активное состояние Фильтра\nconst setFiltersActive = () => {\n  formMapFilters.classList.remove('map__filters--disabled');\n  formMapFiltersElements.forEach((elem) => {\n    elem.removeAttribute('disabled');\n  });\n}\n\n\n//   Неактивное состояние Фильтра\nconst setFiltersDeactive = () => {\n  formMapFilters.classList.add('map__filters--disabled');\n  formMapFiltersElements.forEach((elem) => {\n    elem.setAttribute('disabled', true);\n  });\n}\n\n\nconst isCheckType = (advertisement, element) => {\n  return element.value === ANY_VALUE || advertisement.offer.type === element.value;\n};\n\nconst isCheckPrice = (advertisement, element) => {\n  return element.value === ANY_VALUE ? true : (\n    ((element.value === LOW_VALUE) && (advertisement.offer.price < PriceMap.LOW_PRICE)) ||\n    ((element.value === HIGH_VALUE) && (advertisement.offer.price >= PriceMap.HIGH_PRICE)) ||\n    ((element.value === MIDDLE_VALUE) && (advertisement.offer.price >= PriceMap.LOW_PRICE) && (advertisement.offer.price < PriceMap.HIGH_PRICE))\n  )\n}\n\nconst isCheckRooms = (advertisement, element) => {\n  return element.value === ANY_VALUE || Number(element.value) === advertisement.offer.rooms;\n}\n\nconst isCheckGuests = (advertisement, element) => {\n  return element.value === ANY_VALUE ? true : parseInt(element.value, 10) <= advertisement.offer.guests;\n}\n\nconst isCheckFeatures = (feature, advertisement) => {\n  const featureName = feature.getAttribute('id').replace(FILTER_VALUE, '');\n  return feature.checked === false ? true : advertisement.offer.features.includes(featureName);\n}\n\n\nconst getFilteredAds = (advertisements) => {\n  const resultAdvertisements = [];\n  for (let i = 0; i < advertisements.length; i++) {\n    if (isCheckType(advertisements[i], housingTypeSelect) &&\n      isCheckPrice(advertisements[i], housingPriceSelect) &&\n      isCheckRooms(advertisements[i], housingRoomsSelect) &&\n      isCheckGuests(advertisements[i], housingGuestsSelect) &&\n      isCheckFeatures(wifiFilter, advertisements[i]) &&\n      isCheckFeatures(dishwasherFilter, advertisements[i]) &&\n      isCheckFeatures(parkingFilter, advertisements[i]) &&\n      isCheckFeatures(washerFilter, advertisements[i]) &&\n      isCheckFeatures(elevatorFilter, advertisements[i]) &&\n      isCheckFeatures(conditionerFilter, advertisements[i])) {\n      resultAdvertisements.push(advertisements[i]);\n    }\n    if (resultAdvertisements.length >= SIMILAR_STAYS_COUNT) {\n      break;\n    }\n  }\n  return resultAdvertisements;\n}\n\nconst onFilterChange = (advertisements) => {\n  return debounce((evt) => {\n    evt.preventDefault();\n    const filteredAdds = getFilteredAds(advertisements);\n    deleteMarkers();\n    createMarkers(filteredAdds);\n  }, RERENDER_DELAY);\n}\n\nconst setFilterChange = (advertisements) => {\n  formMapFilters.addEventListener('change', onFilterChange(advertisements));\n};\n\n\n\nexport {\n  formMapFilters,\n  setFilterChange,\n  setFiltersActive,\n  setFiltersDeactive\n};\n","const avatarChooser = document.querySelector('.ad-form-header__input');\nconst avatarContainer = document.querySelector('.ad-form-header__preview');\nconst avatarPreview = document.querySelector('.ad-form-header__preview img');\n\nconst photoChooser = document.querySelector('.ad-form__input');\nconst photosContainer = document.querySelector('.ad-form__photo');\nconst photoPreview = document.querySelector('.ad-form__photo img');\n\nconst IMAGE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\nconst IMAGE_DEFAULT_SOURCE = 'img/muffin-grey.svg';\n\n\nconst deleteChildren = (parent) => {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n\n//   Вставка в контейнер\nconst pasteImage = (imageElement, container, src) => {\n  const image = imageElement.cloneNode(true);\n  image.src = src;\n  container.appendChild(image);\n}\n\n\nconst readImage = (file, fileName, preview, container) => {\n  const matches = IMAGE_TYPES.some((item) => {\n    return fileName.endsWith(item);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      pasteImage(preview, container, reader.result);\n    });\n\n    reader.readAsDataURL(file);\n  }\n}\n\n\nconst onAvatarChooserChange = (chooser, preview, container) => {\n  deleteChildren(container);\n\n  const avatarFile = chooser.files[0];\n  const avatarFileName = avatarFile.name.toLowerCase();\n\n  readImage(avatarFile, avatarFileName, preview, container);\n}\n\n\nconst onImageChooserChange = (chooser, preview, container) => {\n  deleteChildren(container);\n\n  for (let i = 0; i < chooser.files.length; i++) {\n    const avatarFileName = chooser.files[i].name.toLowerCase();\n\n    readImage(chooser.files[i], avatarFileName, preview, container);\n  }\n}\n\n\navatarChooser.addEventListener('change', () => {\n  onAvatarChooserChange(avatarChooser, avatarPreview, avatarContainer);\n});\n\nphotoChooser.addEventListener('change', () => {\n  onImageChooserChange(photoChooser, photoPreview, photosContainer);\n});\n\n\n\n//   удаление до \"первоначальных настроек\"\nconst setDefaultImages = () => {\n  deleteChildren(avatarContainer);\n  pasteImage(avatarPreview, avatarContainer, IMAGE_DEFAULT_SOURCE);\n  deleteChildren(photosContainer);\n  pasteImage(photoPreview, photosContainer, IMAGE_DEFAULT_SOURCE);\n\n}\n\n\nexport { setDefaultImages};\n","import { sendData } from './api.js';\nimport { formMapFilters } from './filtr.js';\nimport { formAdForm, formButtonReset } from './form.js';\nimport { showSuccessMessage } from './message.js';\nimport { setDefaultImages } from './photo.js';\n\nimport {\n  deleteMarkers,\n  getDataMap,\n  markers,\n  setDefaultMainMarker,\n  setFormAddressFieldDefault\n} from './map.js';\n\n\n//   Очистка страницы\nconst clearPage = () => {\n  formAdForm.reset();\n  formMapFilters.reset();\n  setDefaultMainMarker();\n  setFormAddressFieldDefault();\n  deleteMarkers(markers);\n  setDefaultImages();\n}\n\n\n//    Очистка страницы при нажатии кнопки \"Очистить\"\nconst defaultButtonReset = () => {\n  formButtonReset.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    clearPage();\n    getDataMap();\n  });\n}\n\n\n//   Действия при успешной отправке формы\nconst sendSuccessForm = () => {\n\n  showSuccessMessage();\n  clearPage();\n  getDataMap();\n}\n\n\n//   Отправка формы\n// обработчик\nconst onFormSubmit = (evt) => {\n  evt.preventDefault();\n\n  sendData(\n    new FormData(evt.target),\n    sendSuccessForm,\n  );\n}\n\n// слушатель\nformAdForm.addEventListener('submit', onFormSubmit)\n\n\nexport { clearPage, defaultButtonReset }\n\n","import {\n  createErrorMessage,\n  showErrorMessage\n} from './message.js';\n\n\nconst URL_GET = 'https://22.javascript.pages.academy/keksobooking/data';\nconst URL_SEND = 'https://22.javascript.pages.academy/keksobooking';\n\n\n\n//   Запрос данных с сервера\nconst getData = (onSuccsess) => {\n  fetch(URL_GET)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n    })\n    .then((objects) => onSuccsess(objects))\n    .catch((error) => {\n      createErrorMessage(error + '. Не удалось загрузить данные')\n    })\n}\n\n\n//   Отправка данных на сервер\nconst sendData = (body, onSuccess) => {\n  fetch(URL_SEND,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n    })\n\n    .catch(() => {\n      showErrorMessage()\n    });\n};\n\n\nexport { getData, sendData };\n","\nimport { getData } from './api.js';\nimport { createCard } from './card.js';\n\nimport { defaultButtonReset } from './public-reset.js';\n\nimport { setFormActive, setFormDeactive } from './form.js';\nimport { setFiltersActive, setFiltersDeactive, setFilterChange } from './filtr.js';\n\nconst formAddressField = document.querySelector('#address');\n\nconst NUMBER_AFTER_COMMA = 5;\n\nconst ADDS_COUNT = 10;\nconst MIN_ADDS = 0;\n\nlet advertisementsToRender = [];\n\nconst map = L.map('map-canvas');\n\n\n//   Координаты по умолчанию - Токио\nconst DefaultCoordinates = {\n  LAT: 35.68950,\n  LNG: 139.69171,\n}\n\n\n//   Заполнение поля \"Адрес (координаты)\"\nconst setFormAddressField = function (lat, lng) {\n  formAddressField.value = lat + ',' + lng;\n}\n\n\n//   Иконка маркера красного\nconst MAIN_PIN_ICON = L.icon({\n  iconUrl: './img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\n\n//   Иконка маркера синего\nconst PIN_ICON = L.icon({\n  iconUrl: './img/pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\n//   Заполнения поля \"Адрес (координаты)\" по умолчанию координатами центра Токио\nconst setFormAddressFieldDefault = () => {\n  setFormAddressField(DefaultCoordinates.LAT, DefaultCoordinates.LNG);\n}\n\n//   Активное состояние Страницы\nconst activatePage = () => {\n  setFormActive();\n  setFiltersActive();\n  setFormAddressFieldDefault();\n}\n\n\n//    Неактивное состояние страницы\nconst deactivatePage = () => {\n  setFormDeactive();\n  setFiltersDeactive();\n}\n\n\n\n// // Карта\n/* global L:readonly */\n\nconst initMap = () => {\n  map.on('load', () => {\n    activatePage();\n  })\n\n  map.setView({\n    lat: DefaultCoordinates.LAT,\n    lng: DefaultCoordinates.LNG,\n  }, 10);\n\n\n  //   Создание слоя карты\n  L.tileLayer(\n    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    },\n  ).addTo(map);\n}\n\n\n//   Расположение маркера красного\nconst mainPinMarker = L.marker(\n  {\n    lat: DefaultCoordinates.LAT,\n    lng: DefaultCoordinates.LNG,\n  },\n  {\n    draggable: true,\n    icon: MAIN_PIN_ICON,\n  },\n);\nmainPinMarker.addTo(map);\n\n\n// Заполнение поля \"Адрес (координаты)\" новыми координатами после окончания передвижения пользователем маркера\nmainPinMarker.on('moveend', (evt) => {\n  setFormAddressField(evt.target.getLatLng().lat.toFixed(NUMBER_AFTER_COMMA), evt.target.getLatLng().lng.toFixed(NUMBER_AFTER_COMMA));\n});\n\n\n\n// Создание меток\nconst markers = [];\nconst createMarkers = (data) => {\n\n  data.forEach((object) => {\n    const marker = L.marker(\n      {\n        lat: object.location.lat,\n        lng: object.location.lng,\n      },\n      {\n        draggable: true,\n        icon: PIN_ICON,\n      });\n\n    marker\n      .addTo(map)\n      .bindPopup(\n        createCard(object),\n        {\n          keepInView: true,\n        },\n      );\n\n    markers.push(marker);\n\n  });\n}\n\n\n\n// Расположение маркера красного по умолчанию после отправки/сброса формы\nconst setDefaultMainMarker = () => {\n  mainPinMarker.setLatLng([DefaultCoordinates.LAT, DefaultCoordinates.LNG]);\n}\n\n\n// Удаление меток\nconst deleteMarkers = () => {\n  for (let i = 0; i < markers.length; i++) {\n    markers[i]\n      .remove();\n  }\n}\n\n\n\nconst getDataMap = () => {\n  getData((advertisements) => {\n    advertisementsToRender = advertisements.slice(MIN_ADDS, ADDS_COUNT);\n    initMap(advertisementsToRender);\n    createMarkers(advertisements);\n    setFilterChange(advertisementsToRender);\n    defaultButtonReset();\n  });\n}\n\n\nexport {\n  activatePage,\n  deactivatePage,\n  deleteMarkers,\n  createMarkers,\n  initMap,\n  getDataMap,\n  setFormAddressFieldDefault,\n  setDefaultMainMarker,\n  markers\n};\n","// /* global _:readonly */\nimport './util.js';\nimport './data.js';\nimport './card.js';\nimport './form.js';\nimport './map.js';\nimport './filtr.js';\nimport './message.js';\nimport './api.js';\nimport './public-reset.js';\nimport './photo.js';\n\n\nimport { deactivatePage, initMap, getDataMap } from './map.js';\n\ndeactivatePage();\ninitMap();\ngetDataMap();\n"],"sourceRoot":""}